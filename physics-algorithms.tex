\section{Physics and Algorithms}
\subsection{Physical Equations}
\label{sec.physical_eq}
The spatial and temporal evolution of a compressible fluid is governed by the
Euler equations. The Euler equations are a set of hyperbolic conservation laws
governing the density $\rho$, velocity $\mathbf{v}$, and total specific energy
$E$ (specific kinetic energy $\frac{1}{2}\rho \mathbf{v}^2$ plus specific internal
energy $u$). These quantities $\mathbf{U}$ and their respected fluxes
$\mathbf{F}(\mathbf{U})$, defined through the Euler equations, are conveniently
expressed in vector form as
%
\begin{equation}
    \mathbf{U} =
    \left(
    \begin{array}{c}
        \rho \\
        \mathbf{v} \\
        \rho e \\
    \end{array} \right),
    \quad
    \mathbf{F}(\mathbf{U}) =
    \left(
    \begin{array}{c}
        \rho\mathbf{v} \\
        \rho\mathbf{v}\mathbf{v}^T + P \\
        \rho e\mathbf{v} + P\mathbf{v} \\
    \end{array}
    \right),
\end{equation}
%
where P is the pressure. In this notation the Euler equations can be expressed
in the form
%
\begin{equation}
    \label{eq.euler}
    \frac{\partial \mathbf{U}}{\partial t} + \div \mathbf{F} = 0.
\end{equation}
%
As currently stated the system of equations are not closed; more variables then
equations. Thus, a constraint is needed and is supplied by the equation of state
%
\begin{equation}
    P = \rho(\gamma - 1)u,
\end{equation}
%
where $\gamma$ is the ratio of specific heats.

These equations can be solved by the finite-volume approach, which is a
discretization of the domain into finite sized disjoint cells and evolves their
spatial averaged $\mathbf{U}$ values. Specifically, applying equation
(\ref{eq.euler}) to every cell $i$ with volume $V_i$ and performing Gauss'
theorem to convert the volume integral to a surface integral results in
%
\begin{equation}
    \label{eq.euler_int}
    \frac{d\mathbf{Q}_i}{dt} =
    -\sum_{j}\int\mathbf{F}_{ij}(\mathbf{U})\cdot\mathbf{A}_{ij},
\end{equation}
%
where $\mathbf{A}_{ij}$ is the cell's surface area normal and $\mathbf{Q}_i$
is the volume integral of $\mathbf{U}_i$,
%
\begin{equation}
	\mathbf{Q}_i =
    \left(
    \begin{array}{c}
    	m_i \\
        \mathbf{p}_i \\
        E_i
     \end{array}
     \right) = \int_{V_i}\mathbf{U}_i dV,
\end{equation}
where $m_i$, $\mathbf{p}_i$ and $E_i$ are cell's total mass, momentum, and
energy, resptectively. Here, an assumption is taken that the cells volume
is a polyhedron such that the surface integral can become a sum over all
polygon faces. Additionally, time is discretized leading to a finite difference
update of the cell's quantities
%
\begin{equation}
    \label{eq.flux_update}
    \mathbf{Q}_i^{n+1} = \mathbf{Q}_i^n - \Delta t\sum_j
    \mathbf{\hat{F}}_{ij}^{n+1/2} A_{ij}.
\end{equation}
%
In this expression the flux $\mathbf{\hat{F}}^{n+1/2}$ is taken to be a time
averaged and constant across the cell face. To be able to use equation
\ref{eq.flux_update} a strategy must be taken to estimate
$\mathbf{\hat{F}}^{n+1/2}$ and $A_{ij}$. Sections \ref{sec.riemann} and
\ref{sec.tessellation} respectively will go into detail how these quantities are
estimated.

\subsection{Tessellation}
\label{sec.tessellation}
As stated in Section \ref{sec.physical_eq}, the Euler equations, as written as
(\ref{eq.flux_update}), assumes that the cells are of the form of polyhedrons.
There are many forms of space partitioning that meet this criteria but for this
paper we will restrict our attention to the Voronoi tessellation. The Voronoi
tessellation partitions the space into a set of disjoint polyhedrons for a
given set of points. The set of points are called mesh generators and for each
generator their corresponds a region consisting of all points that are closer
to that generator than any other. Thus, for each mesh generating pair there
lies a polygon that is equidistant. This geometric property will be exploited
in several ways. For the rest of this paper we will refer to the polyhedra
associated with the mesh generator as a cell and the polygons making up the
polyhedra as faces.

The creation of the Voronoi tessellation can be performed by first constructing
the Delaunay triangulation. The Delaunay tessellation is the dual graph of the
Voronoi tessellation and is defined as the triangulation of points such that
no point in the set lies inside the circumcircle of any of the triangles in
2d. In 3d the triangles become tetrahedron but the same definition applies.
Remaining in 2d for simplicity, the points are the vertices's of the triangles.
The dual aspect refers to the fact that each triangle edge corresponds to a
Voronoi face and each Voronoi vertex corresponds to the center of the
circumcirlce of the triangle. 

\subsection{Fluid Update}
\subsubsection{Reconstruction}
To solve the riemann problem primitive values are needed at the face. As a first
choice, cell center values can be used. Although for more accurate results a 
method is needed to extrapolate the cell center values to the center of mass of 
the face. A first order, in space and time, can be constructed by taylor 
expanding the primitive values
%
\begin{equation}
	\label{eq.taylor}
	\mathbf{W}' = \mathbf{W} + \frac{\partial\mathbf{W}}{\partial\mathbf{r}}
    	(\mathbf{f}-\mathbf{s}_i) + \frac{\partial\mathbf{W}}
        {\partial t}{\Delta t}.
\end{equation}
%
The expansion has two unknowns, the spatial derivative
$\frac{\partial\mathbf{W}}{\partial \mathbf{r}}$ and time derivative
$\frac{\partial\mathbf{W}}{\partial \mathbf{r}}$. However, both derivatives
are related through the Euler equations in primitive form
%
\begin{equation}
    \frac{\partial\mathbf{W}}{\partial t}  + \mathbf{A}
    	(\mathbf{W})\frac{\partial\mathbf{W}}{\partial t} = 0,
    \quad
    \mathbf{A}(\mathbf{W}) =
    \left(
    \begin{array}{ccc}
        \mathbf{v} & \rho & 0 \\
        0 & \mathbf{v} & 1/\rho \\
        0 & \gamma P & \mathbf{v}
    \end{array}
    \right).
\end{equation}
%
Thus, only the spatial derivatives needed to be calculated. For the
calculation we follow the method derived from (Springel) which is
summarized below. Given a cell $i$ the components of 
$\frac{\partial\mathbf{W}}{\partial \mathbf{r}}$, which are gradients
of the primitive variables, are given by
%
\begin{equation}
	\nabla\phi_i = \frac{1}{V_i}\sum_{j}A_{ij}
    	\left(\left[\phi_i - \phi_j\right]\right) -
        \frac{\phi_i + \phi_j}{2}
        \frac{\mathbf{r}_{ij}}{r_{ij}}.
\end{equation}
%
The sum is over all neighbors $j$ of particle $i$, $\phi_i$ and
$\phi_j$ are the scalar field values at each cell center respectively,
$\mathbf{r}_{ij} = \mathbf{r}_i - \mathbf{r}_j$ is the separation vector
with magnitude $r_{ij} =|\mathbf{r}_{ij}|$. As constructed the gradients
are second order in space for smooth flows. However, in the presence of
shocks numerical instabilities may arise and therefore the reconstruction
must be reduced. To deal with this a slope limiter is used. We employ two
limiters. The first one is the method used by AREPO and begins with
the calculation of
%
\begin{equation}
		\psi_{ij} = \left\{
  		\begin{array}{@{}ll@{}}
    		(\phi_i^{max} - \phi_i)/\Delta \phi &
            	\text{for}\ \Delta\phi_{ij} > 0 \\
            (\phi_i^{min} - \phi_i)/\Delta \phi &
            	\text{for}\ \Delta\phi_{ij} < 0 \\
            1 & \text{for}\ \Delta\phi_{ij} = 0,
  		\end{array}\right.
\end{equation}
%
where $\phi_i^{max} =$ max$(\phi_j)$ and $\phi_i^{min} =$ min$(\phi_j)$ are
the maximum/minimum values across all neighbors of $i$ and
$\Delta\phi_{ij} = \nabla \phi_i \cdot (\mathbf{f}_{ij} - \mathbf{s}_i)$. Then 
the minimum of all $\psi_{ij}$s, associated with each primitive field, is found 
producing a single scalar value
%
\begin{equation}
	\alpha_i = min(1, \psi_{ij})
\end{equation}
%
 that is used to limit the gradient
%
\begin{equation}
	\nabla \phi_i' = \alpha_i \nabla \phi_i
\end{equation}
\subsubsection{Riemann Solve}
\label{sec.riemann}

\subsubsection{Flux Computation}
\subsubsection{Time Integration}

\subsection{Grid Motion}
\subsubsection{Regularization}
Allowing the mesh generators to move with the local fluid velocity 
$\mathbf{w}_i$ can lead to cells that are elongated or mesh generators close to 
given face. This results, to an unstable evolution of the cells because their 
faces can move rapidly relative to the generator velocity (Duffell). To 
counteract this issue (Springel) proposed a correction term that would steer the 
generator towards its center of mass. This effectively causing the cell to 
become rounder, thus mitigating the issue. The correction term is defined as
%
\begin{equation}
	\mathbf{w}_i' = \mathbf{w}_i + \chi\left\{
  		\begin{array}{@{}ll@{}}
    		0, & \text{for}\ d_i/(\eta R_i) < 0.9 \\
    		c_i\frac{\mathbf{s}_i - \mathbf{r}_i}{d_i}
            	\frac{d_i-0.9\eta R_i}{0.2\eta R_i}, 
            	& \text{for}\ 0.9 \leq d_i/(\eta R_i) < 1.1 \\
            c_i\frac{\mathbf{s}_i - \mathbf{r}_i}{d_i},
               	& \text{for}\ 1.1 \leq (d_i)/(\eta R_i).
  		\end{array}\right.
\end{equation}
%
Here $R_i$ is the effective radius of the cell, $(V_i/\pi)^{1/2}$ for 2d and
$(3V_i/4\pi)^{1/3}$ for 3d, $d_i$ is the distance between the generators
position $\mathbf{r}_i$ and center of mass $\mathbf{s}_i$, $c_i$ is the local sound speed. $\chi$ and $\eta$ are tunning parameters which are typically set 
to 0.25 and 1.0, respectively.



\subsection{External Boundary Conditions}
\subsubsection{Reflecting}
\subsubsection{Periodic}

\subsection{Gravity}
\subsubsection{Constant}
\subsubsection{Tree}

\subsection{Chemistry and Cooling}
\subsubsection{Grackle}

\subsection{Additional Physics}
\subsubsection{Conduction}
\subsubsection{Magnetic Fields}

\subsection{Parallelism}
\subsubsection{Partitioning}
\subsubsection{Ghost particle copying}
